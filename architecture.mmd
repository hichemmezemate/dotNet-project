%% Architecture Mermaid pour GestionDemandesAzure
flowchart TB
  Browser["Browser / Client"] -->|HTTP(S)| WebApp["ASP.NET Core MVC\n(Program.cs)"]
  subgraph Middlewares
    Static["StaticFiles"]
    Routing["Routing"]
    Auth["Authentication (Azure AD)\nAuthorization"]
  end
  WebApp --> Middlewares
  WebApp --> Controllers["Controllers (Razor MVC)\nControllers/\n(e.g. DemandeController)"]
  Controllers --> Views["Views (Razor)\nViews/"]
  WebApp --> Services["Services / DI\n(Application services)"]
  Services --> DbContext["EF Core ApplicationDbContext\n(Data/ApplicationDbContext.cs)"]
  DbContext -->|DbSet<Demande>| DemandeModel["Model: Demande\n(Models/demande.cs)"]
  DbContext -->|Provider: Npgsql| Postgres[("PostgreSQL\n(local or Azure DB)")]
  WebApp -.->|Config: appsettings.json| AzureADConfig["AzureAd (appsettings.json)"]

  classDef infra fill:#f9f,stroke:#333,stroke-width:1px;
  class Postgres infra;
  class DbContext infra;
